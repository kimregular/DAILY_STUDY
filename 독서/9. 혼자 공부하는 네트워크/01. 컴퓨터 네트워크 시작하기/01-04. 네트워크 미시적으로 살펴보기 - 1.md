# 네트워크미시적으로 살펴보기 - 1
이번 절에서는 네트워크를 좀 더 세부적으로 살펴보고, 관련 개념을 학습합니다. 여러분이 학습할 개념은 크게 세 가지입니다. 바로 통신 과정에서 정보를 올바르게 주고받기 위해 합의된 규칙이나 방법을 의미하는 프로토콜, 통신이 일어나는 구조를 게층화한 네트워크 참조 모델, 통신 과정에서 이루어지는 캡슐화(역캡슐화)입니다. 새롭게 드장하는 용어가 낯설게 느껴질 수 있지만, 앞으로 반복하여 자주 등장할 용어이니 비유를 살펴보며 편한 마음으로 큰 흐름만 이해해 보세요.

## 프로토콜
현대 인터넷은 호스트 간 패킷을 교환하는 방식으로 대부분 패킷 교환 방식을 사용합니다. 패킷은 택배와 유사한 개념으로, 여러분의 컴퓨터가 서로 연결되어 정보를 주고받는 방식은 택배를 주고받는 과정과 비슷합니다.

여러분과 멀리 떨어져 있는 '영수(수신지 호스트)'라는 친구가 있다고 가정해 보겠습니다. 영수에게 택배로 책을 선물하고자 합니다. 영수가 책을 올바르게 수령한 뒤, 이를 읽고 이해하는 것까지가 목표입니다. 영수에게 선물할 책을 택배로 보내는 과정을 순서대로 생각해 보면 다음과 같습니다.

1. 우선 선물할 책(페이로드)을 택배 상자에 담습니다.
2. 배송 주소 등 택배 기사가 읽을 메시지(헤더)를 작성하고 첨부합니다.
3. 택배 기사(네트워크 장비)를 통해 발송합니다.

영수가 책을 제대로 받아서 읽으려면 기본적으로 언어가 통해야겠지요? 즉, 선물하려는 책의 언어를 영수도 이해할 수 있어야 합니다. 영수가 이해할 수 없는 언어로 작성된 책이라면 영수가 책을 올바르게 수령해도 이를 읽고 이해할 수 없기 때문입니다.

그리고 택배가 영수에게 제대로 배송되려면 택배 기사 또한 택배 송장에 적힌 메시지를 이해할 수 있어야 합니다. 수신지, 수신자, 발송자(송신자) 등의 정보가 택배 기사가 이해할 수 없는 언어로 적혀 있다면 제대로 배송할 수 없습니다.

조금 더 나아가 택배 배송 과정에 여러 명의 택배 기사가 필요하다면 택배 기사끼리 주고받는 언어도 서로 통해야 합니다. 이러한 점에서 '언어'는 올바르게 정보를 주고받기 위해 합의된 의사소통 방식이라고 볼 수 있습니다.

네트워크에도 언어와 유사한 개념이 있습니다. 바로 프로토콜입니다. 언어가 정보를 주고받기 위해 사회적으로 합의된 의사소통 방식이라면, 프로토콜은 노드 간에 정보를 올바르게 주고받기 위해 합의된 듀칙이나 방법을 의미합니다.

즉, 서로 다른 통신 장치들이 정보를 주고받으려면 프로토콜이 통해야 합니다. 여러분이 인터넷을 이용할 수 있는 것도, 이메일을 주고받을 수 있는 것도, 파일을 주고받을 수 있는 것도 모두 상대 호스트와 동일한 프로토콜을 사용하기 때문입니다.

프로토콜의 정의가 다소 모호하게 느껴진다면 예를 통해 알아볼까요? 다음과 같은 문장이 있다고 가정해 보겠습니다.

> IP는 패킷을 수신지까지 전달하기 위해 사용되는 프로토콜이다.

위 문장에서 IP는 프로토콜입니다. IP라는 규칙으로 정보를 주고받음으로써 패킷을 수신지까지 올바르게 전달할 수 있음을 의미합니다.

> ARP는 192.168.1.1과 같은 형태의 'IP 주소'를 A1:B2:C3:D4:E5:F6과 같은 형태의 'MAC 주소'로 대응하기 위해 사용되는 프로토콜이다.

위 문장에서 ARP는 프로토콜입니다. IP 주소를 MAC 주소로 대응하기 위해서는 ARP라는 규칙으로 정보를 주고받아야 함을 의미합니다.

> HTTPS는 HTTP에 비해 보안상 더 안전한 프로토콜이다.

위 문장에서 HTTPS와 HTTP는 모두 프로토콜입니다. HTTP라는 규칙으로 정보를 주고받는 것보다 HTTPS라는 규칙으로 정보를 주고받는 것이 보안상 더 안전함을 의미합니다.

> TCP는 UDP에 비해 일반적으로 느리지만 신뢰성이 높은 프로토콜이다.

위 문장에서 TCP와 UDP는 모두 프로토콜입니다. TCP라는 규칙으로 정보를 주고받는 것은 UDP라는 규칙으로 정보를 주고받는 것에 비해 데이터를 더 확실하게 전송할 수 있다고 짐작할 수 있습니다.

예시를 통해서 알 수 있는 중요한 점은 모든 프로토콜에는 저마다의 목적과 특징이 있다는 점입니다. 프로토콜의 임무는 정해져 있기에 저마다 목적과 특징이 다양합니다. 01-02에서 패킷에는 페이로드 뿐 아니라 헤더라는 부가 정보도 포함되어 있다고 했지요? 프로토콜마다 목적과 특징이 다르기에 이에 부합하는 정보도 달라질 수 있으며, 따라서 특정 프로토콜로 주고받는 패킷의 부가 정보도 달라질 수 있습니다. 즉, 프로토콜마다 패킷의 헤더 내용이 달라질 수 있습니다.

다음은 여러분이 앞으로 학습할 TCP와 UDP 프로토콜의 헤더입니다. TCP와 UDP라는 규칙으로 패킷을 주고받을 때는 그림과 같은 정보가 페이로드에 추가됩니다. TCP는 UDP에 비해 더 확실히 데이터를 전송할 수 있다고 했지요? 그렇기에 TCP는 신뢰성 높은 전송을 수행하기 위한 정보로 구성되어 있고, 헤더에도 더 많은 정보가 포함되어 있습니다.

![pic1](https://velog.velcdn.com/images/tjpark312/post/4e0a5faa-9112-4feb-8447-2746289334f2/image.png)

![pic2](https://velog.velcdn.com/images/tjpark312/post/4b0b5949-5da2-4257-92a2-6de60522316d/image.png)

프로토콜의 종류는 매우 다양합니다. 앞으로 이 책 전체에 걸쳐 많은 프로토콜을 접할 예정이니 지금부터 '프로토콜'이라는 용어에 익숙해지기를 바랍니다. 또한 IP, TCP, UDP, HTTP처럼 중요한 프로토콜은 헤더의 주요 내용까지 분석해 보겠습니다.