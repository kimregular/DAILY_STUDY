# 네트워크 미시적으로 살펴보기 - 2
## 네트워크 참조 모델
네트워크로 메시지를 송수신하는 것은 택배를 주고받는 것과 유사하다고 했습니다. 앞서 들었던 택배 예시를 다시 살펴봅시다. 영수에게 선물할 책을 택배로 보내는 과정을 조금 더 세밀하게 순서를 나누어 보면 다음과 같습니다.

1. 선물할 책을 준비합니다.
2. 책이 상하지 않도록 책을 포장용지로 감쌉니다.
3. 포장된 책을 택배 상자에 담습니다.
4. 택배 상자를 밀봉합니다.
5. 택배 기사가 확인할 메시지를 택배 상자에 붙입니다.
6. 택배 상자를 택배 기사에게 전달합니다.

이번에는 영수 입장에서 살펴봅시다. 영수가 택배를 전달받는 과정은 위 과정과 정확하게 반대입니다.

1. 택배 상자를 택배 기사로부터 전달받습니다.
2. 택배 기사가 확인한 메시지를 제거합니다.
3. 택배 상자를 개봉합니다.
4. 택배 상자에서 포장된 책을 꺼냅니.
5. 포장용지를 제거합니다.
6. 선물 받은 책을 확인합니다.

이 과정을 관찰해 보면 택배를 주고받는 과정에는 정형화된 순서가 있습니다. 이는 다음 쪽의 그림처럼 계층으로 표현할 수 있습니다.

![pic1](https://theorydb.github.io/assets/img/review/review-book-network-study-alone-2.png)

네트워크도 마찬가지입니다. 네트워크를 통해 정보를 주고받을 때는 정형화된 여러 단계를 거칩니다. 이 과정은 계층으로 표현할 수 있습니다. 이렇게 통신이 일어나는 각 과정을 계층으로 나눈 구조를 네트워크 참조 모델이라고 합니다. 계층으로 표현한다는 점에서 네트워크 계층 모델이라고 부르기도 합니다.

![pic2](https://velog.velcdn.com/images/surisuri/post/d46a6184-348a-415d-87ed-9fbd60a040ed/image.png)

이와 같이 통신 과정을 계층으로 나눈 이유는 크게 두 가지입니다.

**첫째, 네트워크 구성과 설계가 용이합니다.**\
각 계층이 수행해야 할 역할이 정해져 있으므로 계층의 목적에 맞게 프로토콜과 네트워크 장비를 계층별로 구성할 수 있습니다. 예를 들어 2계층에서는 2계층의 목적에 부합하는 프로토콜과 네트워크 장비를, 3계층에서는 3계층의 목적에 부합하는 프로토콜과 네트워크 장비를 사용할 수 있습니다.

물론 모든 프로토콜이나 네트워크 장비가 참조 모데로가 완벽히 들어맞는 것은 아닙니다. 때로는 칼로 자르듯 명확하게 구분되지 않을 수도 있습니다. 특히 네트워크 장비는 상위 계층의 장비가 하위 계층의 장비 역할을 포괄해서 수행하는 경우도 많지요. 그래도 네트워크 참조 모델은 네트워크 구성 및 설계에 있어 훌륭한 가이드라인 역할을 수행합니다.

**둘째, 네트워크 문제 진단과 해결이 용이합니다.**\
통신 과정에서 문제가 발생하더라도 문제의 원인을 계층별로 진단하기 수월합니다. 가령 잘되던 인터넷이 갑자기 안 되면 가장 먼저 최하위에 있는 1계층에서 발생한 문제인지 판단하기 위해 케이블 등 유무선 매체의 접속 상태를 확인해 볼 수 있습니다. 이상이 없다면 다음 2계층에서 발생한 문제인지 판단하기 위해 정보가 수신지까지 제대로 전달되었는지 진단해 봅니다. 여기서도 이상이 없다면 3계층에서 이상이 없는지 순서대로 진단해 보면 됩니다.

이렇듯 네트워크를 계층별로 진단하면 문제 발생 지점을 추측할 수 있어, 문제 진단과 해결이 수월하다는 장점이 있습니다.

요컨대, 네트워크 참조 모델은 네트워크 구성과 설계, 문제 진단과 해결을 용이하게 합니다. 그럼, 이제 대표적인 네트워크 참조 모델인 OSI 모델과 TCP/IP 모델을 알아보겠습니다.

### OSI 모델
OSI 모델은 국제 표준화 기구에서 만든 네트워크 참조 모델입니다. 통신 단계를 7개의 계층으로 나누는데, 최하위 계층에서 최상위 계층순으로 각각 물리 계층, 데이터 링크 계층, 네트워크 계층, 전송 계층, 세션 계층, 표현 계층, 응용 계층입니다. 각 계층이 수행하는 역할을 알아볼까요? 모르는 용어가 나오더라도 추후 자세히 다룰 예정이니 지금은 편한 마음으로 용어에 눈도장만 찍어 주세요.

![pic3](https://velog.velcdn.com/images/pppp0722/post/c3a64a22-e99b-414a-a228-8302ec874542/image.png)

#### 1. 물리 계층
물리 계층은 OSI 모델의 최하단에 있는 계층으로, 1과 0으로 표현되는 비트 신호를 주고받는 계층입니다. 가장 근원적인 통신이 이루어지는 계층이라 할 수 있습니다. 컴퓨터는 기본적으로 1(on)과 0(off)만 이해합니다. 여러분이 네트워크를 통해 전달받는 이메일, 사진, 동영상도 사실은 1과 0으로 이루어져 있지요. 이렇게 1과 0으로 표현된 비트 데이터는 다양한 통신 매체를 통해 다양한 신호로 운반될 수 있습니다. 가령 같은 비트 데이터라도 통신 매체에 따라 전기, 빛, 전파 등의 신호로 운반될 수 있습니다.

통신 매체에 맞는 신호로 운반되도록 비트 데이터의 변환이 이루어지고 통신 매체를 통한 송수신이 이루어지는 계층이 바로 물리 계층입니다. 그렇기에 물리 계층을 학습할 때는 주로 네트워크 장비, 통신 매체에 관한 이야기를 많이 하게 될 것입니다.

#### 2. 데이터 링크 계층
데이터 링크 계층은 네트워크 내 주변 장치 간의 정보를 올바르게 주고받기 위한 계층입니다. 다음 장에서 학습할 이더넷을 비롯한 많은 LAN 기술이 데이터 링크 계층에 녹아 있습니다. 여기서는 물리 계층을 통해 주고받는 정보에 오류가 없는지 확인하고, MAC 주소라는 주소 체계를 통해 네트워크 내 송수신지를 특정할 수 있습니다. 때로는 전송 과정에서 발생할 수 있는 충돌 문제를 해결하는 계층이기도 합니다.

#### 3. 네트워크 계층
네트워크 계층은 메시지를 (다른 네트워크에 속한) 수신지까지 전달하는 계층입니다. 데이터 링크 계층에서 네트워크 내의 주변 장치 간의 통신이 이루어진다면, 네트워크 계층에서는 네트워크 간의 통신이 이루어집니다. 예컨대 네트워크 계층은 인터넷을 가능하게 하는 계층이라고 할 수 있습니다. 네트워크 계층에서는 IP 주소라는 주소 체계를 통해 통신하고자 하는 수신지 호스트와 네트워크를 식별하고, 원하는 수신지에 도달하기 위한 최적의 경로를 결정합니다.

#### 4. 전송 계층
전송 계층은 신로성 있고 안정성 있는 전송을 해야 할 때 필요한 계층입니다. 패킷이 정상적으로 보내졌는지, 중간에 유실된 정보는 없는지, 여러 개의 패킷을 보낼 때 순서가 뒤바뀐 것은 없는지 등을 확인해야 할 때가 있습니다. 이때 전송 계층에서는 패킷이 흐름을 제어하거나 전송 오류를 점검해 신뢰성 있고 안정적인 전송이 이루어지도록 합니다. 이 외에도 포트라는 정보를 통해 실행 중인 응용 프로그램의 식별이 이루어지기도 합니다.

#### 5. 세션 계층
세션 계층은 이름 그대로 '세션'을 관리하기 위해 존재하는 계층입니다. 세션이라는 용어는 다양한 상황에서 폭넓게 사용되지만, 일반적으로 통신을 주고받는 호스트의 응용 프로그램 간 연결 상태를 의미합니다. 세션 계층에서는 이러한 연결 상태를 생성하거나 유지하고, 종료되었을 때는 끊어 주는 역할을 담당합니다.

#### 6. 표현 계층
표현 계층은 마치 번역가와 같은 역할을 하는 계층입니다. 사람이 이해할 수 있는 언어인 문자를 컴퓨터가 이해할 수 있는 코드로 변환하거나, 압축, 암호화와 같은 작업이 표현 계층에서 이루어집니다.

#### 7. 응용 계층
응용 계층은 OSI 참조 모델 최상단에 있는 계층으로 사용자 및 사용자가 이용하는 응용 프로그램과 가장 밀접히 맞닿아 있는 계층입니다. 응용 계층은 사용자가 이용할 응용 프로그램에 다양한 네트워크 서비를 제공합니다. 예를 들어서 웹 브라우저 프로그램에 웹 페이지를 제공하거나 이메일 클라이언트 프로그램에 송수신된 이메일을 제공하는 등 실질적인 네트워크 서비스가 제공되는 계층이 바로 응용 계층입니다. 응용 프로그램에 다양한 서비스가 제공될 수 있는 만큼 타 계층에 비해 응용 계층에 속한 프로토콜이 많습니다.

### TCP/IP 모델
OSI 모델은 주로 네트워크를 이론적으로 기술하고 이해할 때 사요하는 반면에 TCP/IP 모델은 이론보다는 구현에 중점을 둔 네트워크 참조 모델입니다. OSI 모델의 목적이 '이상적 설계'에 가깝다면, TCP/IP 모델은 '실용적 구현'에 가깝습니다.

TCP/IP 모델은 TCP/IP 4계층, 인터넷 프로토콜 스위트, TCP/IP 프로토콜 스택이라고도 부릅니다. 여기서 사용된 TCP와 IP라는 용어는 앞으로 여러분이 학습할 프로토콜의 이름이며, IP는 인터넷 프로토콜의 약자입니다.

그렇다면 네트워크 참조 머델에 왜 TCP/IP라는 프로토콜 이름이 붙은 것일까요? 이유는 단순합니다. 이 두 프로토콜이 오늘날 네트워크 구현의 핵심으로 간주되기 때문입니다.

```txt
프로토콜 스위트, 프로토콜 스택이란?
다양한 계층이 프로토콜 집합을 프로토콜 스위트, 프로토콜 스택이라고 합니다. 마치 묶음으로 판매되는 세트 의류처럼 주로 함께 활용되는 프로톨들이라고 보아도 좋습니다.

TCP/IP 모델에서도 TCP, IP를 포함해 UDP, ARP, HTTP 등 다양한 프로토콜들이 주로 묶여 함께 사용됩니다. TCP, IP를 중심으로 한 이러한 프로토콜들의 집합을 통칭하기 위해 인터넷 프로토콜 스위트, TCP/IP 프로토콜 스택이라는 이름이 붙은 것입니다.
```

TCP/IP 모델은 최하위 계층에서 최상위 계층순으로 각각 네트워크 액세스 계층, 인터넷 계층, 전송 계층, 응용 계층으로 이루어집니다. 각 계층을 살펴보겠습니다.

![pic4](https://yozm.wishket.com/media/news/1956/14.png)

#### 1. 네트워크 액세스 계층
네트워크 액세스 계층은 링크 계층 또는 네트워크 인터페이스 계층이라고도 부릅니다. 이 계층은 OSI 모델의 데이터 링크 계층과 유사합니다.

전통적인 TCP/IP 모델에서의 최하위 계층은 OSI 모델에서의 물리 계층보다는 데이터 링크 계층 역할을 수행하는 쪽에 가까웠습니다. TCP/IP 모델에는 OSI 모델에서의 물리 계층에 해당하는 개념이 없다고 보는 견해도 있지요.


그래서 많은 공식 문서와 전공 서적에서는 OSI 모델과 TCP/IP 모델을 대응하여 설명하기 위해 TCP/IP 모델에 물리 계층을 추가해 TCP/IP 모델을 5계층으로 확장하여 기술하기도 합니다. 다음 쪽의 그림을 확인해 보세요. 이 책에서는 다음 쪽에 있는 그림에서 붉은색으로 표기된 모델을 차용하여 서술할 예정입니다. 유선 LAN과 관련한 물리 계층과 데이터 링크 계층에 대해서는 2장에서 자세히 알아보겠습니다.

#### 2. 인터넷 계층
인터넷 계층은 OSI 모델에서의 네트워크 계층과 유사합니다. 인터넷 계층에서의 주요 프로토콜과 네트워크 장비의 역할과 동작은 3장에서 학습해 보겠습니다.

#### 3. 전송 계층
전송 계층은 OSI 모델에서의 전송 계층과 유사합니다. 관련하여 4장에서 학습해 보겠습니다.

#### 4. 응용 계층
응용 계층은 OSI 모델의 세션 계층, 표현 계층, 응용 계층을 합친 것과 유사합니다. 5장에서 학습할 예정입니다.

짐작할 수 있다시피, 이 책을 통해 여러분은 '전기 신호를 받아들이는 가장 근원적인 물리 계층'에서부터 '사용자 및 사용자 프로그램과 가장 가까이 맞닿아 있는 응용 계층'까지 점점 상위 계층으로 올라가는 형태로 학습해 나갈 예정입니다.

![pic5](https://velog.velcdn.com/images/rachel28/post/159b0575-f214-44b2-b991-70086e233e4c/image.png)