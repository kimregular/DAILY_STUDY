## 플릿플롭
마지막에 논의했던 것처럼 데이터 변경으로 인해 잘못된 결과가 생길 수 있는 가능성을 최소화하고 싶다. 이를 위해 가장 일반적으로 사용하는 방법 노리 수준이 특정 값에 머무는 동안 데이터를 잡아내지 ㅇ낳고 논리 수준이 한 수준에서 다른 수준으로 전이되는 중간에 데이터를 잡아내는 것이다. 이런 전이를 에지(edge)라고 부른다. 에지를 시간에 대한 판정 기준이라고 생각할 수 있다. 그림 3-8을 보면 논리 수준 사이의 (0에서 1로, 1에서 0으로) 전이가 거의 순식간에 벌어진다는 사실을 알 수 있다. 에지에 의해 데이터 변화가 촉발되는 래치를 플립플롭이라고 부른다.

플릿플롭을 만들 때는 래치를 기본 요소로 사용하낟. 3개의 S-R 래치를 그림 3-9처럼 잘 연결하면 양의 에지에 의해 변화가 촉발되는 플립플롭을 만들 수 있고, 이를 D 플립플롭이라고 부른다. '양의 에지에 의해 변화가 촉발된다'는 말은 논리 수준이 0에서 1로 바뀌는 순간에 플립플롭의 출력이 바뀐다는 뜻이다. 반대로 음의 에지에 의해 변화가 촉발되는 프릷플롭은 논리 수준이 1에서 0으로 바뀔 때 작동한다. 

그림 3-9 D 플립플롭\
![그림 3-9 D 플립플롭](https://bugoverdose.github.io/static/828c51e178ab2af439055368e686c483/1cfc2/d-flip-flop.png)

여러분이 이 회로를 바로 이해하기는 어려울 것이다. 오른쪽의 두 게이트는 S-R 래치를 이룬다. 그림 3-5로부터 $\overline{S}$와 $\overline{R}$ 중 하나가 참(로우)이 되지 않으면 이 래치의 출력이 바뀌지 않음을 안다. 

그림 3-10은 여러 가지 D와 clock에 따라 회로가 어떻게 동작하는지를 보여준다. 가는 선은 논릿값이 0이고 굵은 선은 논릿값이 1이다.

그림 3-10 D 플립플롭의 동작\
![그림 3-10 D 플립플롭의 동작](images/image_3-10.png)

왼쪽부터 차례대로 살펴보자. 클록을 0으로 설정한다(맨 왼쪽 그림). $\overline{S}$와 $\overline{R}$가 모두 거짓(하이)이기 때문에 D의 값은 문제가 되지 않고, 그림 3-9의 오른쪽 래치의 상태는 바뀌지 않는다. 왼쪽에서 두 번째와 세 번째 그림을 살펴보면 $\overline{R}$가 참(로우)인 경우 D의 값을 바꿔도 아무 효과가 없음을 보여준다. 마찬가지로 맨 오른쪽의 두 그림은 $\overline{S}$가 참(로우)인 경우에 D값을 바꿔도 아무 변화가 없음을 보여준다. 이로부터 클록이 로우이거나 하이인 경우에는 D를 바꿔도 아무 일도 일어나지 않음을 알 수 있다.

이제 그림 3-11을 통해 클록이 로우에서 하이로 바뀔 때 어떤 일이 벌어지는지 살펴보자.

그림 3-11 양의 에지(클록이 0에서 1로 변할 때)에서 D 플립플롭의 동작\
![그림 3-11 양의 에지(클록이 0에서 1로 변할 때)에서 D 플립플롭의 동작](images/image_3-11.png)

왼쪽에서 클록이 로우이고 D가 하이, $\overline{S}$와 $\overline{R}$가 모두 하이라면 아무 변화도 없음을 볼 수 있다. 하지만 클록이 1로 바뀌면 $\overline{S}$가 로우로 바뀌는데, 이 말은 플립플롭의 상태가 바뀐다는 뜻이다. 오른쪽 그림에서는 D가 로우이고 클록이 0에서 1로 바뀔 때 어떤 일이 벌어지는지 보여준다. 그림 3-10에서 다른 부분의 변화는 이 시스템에 아무 영향도 끼치지 못함을 알 수 있다.

1918년 영국 물리학자인 윌리엄 에클스와 프랭크 조던이 최초의 전자적 플립플롭을 발명했다. 당시에는 진공관을 썼다. 그림 3-12에서는 좀 덜 구식인 7474라고 부르는 D 플립플롭의 스키매틱 기호를 볼 수 있다.

그림 3-12 D 플립플롭\
![그림 3-12 D 플립플롭](images/image_3-12.png)

D 플립플롭에는 보수 출력인 Q, $\overline{Q}$와 입력 $\overline{S}$(set)와 $\overline{R}$(reset)가 있다. 다이어그램에는 S와 R로 되어 있어서 혼동할 수도 있는데 박스의 입력 표시에 동그라미(O)가 있기 때문에 (참/거짓이 반전된) $\overline{S}$와 $\overline{R}$가 된다. 따라서 왼쪽에 있는 이상한 것들을 제외하면 D 플립플롯은 S-R 래치와 같다. 왼쪽의 이상한 것들은 두 가지 추가 입력이다. D는 데이터를, CK는 클록을 뜻한다. 클록은 삼각형으로 표현한다. 이 플립플롭의 변화는 양의 에지에 의해 촉발되기 때문에 CK 신호가 0에서 1로 바뀌는 시점에 D 입력의 값이 플립플롭에 저장된다.

에지에 의해 상태 변화가 촉발되는 장치의 상태 변화 타이밍을 볼 때는 전파 지연 외의 요소도 고려해야 한다. 클록 에지가 발생(즉, 클록값이 0에서 1로 전이)하기 전에 얼마나 오랫동안 입력 신호가 안정적으로 유지돼야 하는지를 나타내는 설정 시간(셋업 타입이라고도 함)과 클록에지가 발생한 이후에 얼마나 오랫동안 입력 신호가 안정적으로 유지돼야 하는지를 나타내는 유지 시간(홀드 타임이라고도 함)이 있다. 이런 타이밍을 그림 3-13에서 볼 수 있다.

그림 3-13 설정 시간과 유지 시간\
![그림 3-13 설정 시간과 유지 시간](images/image_3-13.png)

그림을 보면 클록 에지 근처의 설정과 유지 시간을 제외한 나머지 시간에는 D의 값이 무엇이든 출력에 영향이 없음을 알 수 있다. 그리고 다른 모든 로직과 마찬가지로 출력은 전파 지연 시간이 지나야 D 입력과 무관하게 안정적으로 유지된을 알 수 있다. 보통 설정 시간과 유지 시간을 $t_{setup}$과 $t_{hold}$라고 표시한다.

에지에서 상태가 변하는 플립플롭은 클록과 함께 쓰일 수 있다. 다음 절에서 이런 예제를 살펴본다.