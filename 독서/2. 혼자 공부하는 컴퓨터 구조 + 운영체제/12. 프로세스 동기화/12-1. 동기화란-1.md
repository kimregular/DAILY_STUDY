동시다발적으로 실행되는 프로세스들은 공동의 목적을 올바르게 수행하기 위해 서로 협력하며 영향을 주고 받기도 한다. 이렇게 협력하여 실행되는 프로세스들은 실행 순서와 자원의 일관성을 보장 해야 하기에 반드시 `동기화  (synchronization)`되어야 한다.

### 동기화의 의미
동시다발적으로 실행되는 많은 프로세스는 서로 데이터를 주고받으며 협력하며 실행될 수 있다. 예를 들어 워드 프로세서에는 사용자로부터 입력을 받는 프로세스와 입력한 내용의 맞춤법을 검사하는 프로세스, 입력한 내용을 화면에 출력해 주는 프로세스 등이 있다. 이 프로세스들은 각기 다른 독립적인 프로세스이지만 공동의 목표를 위해 서로 협력하는 존재이다.

이렇게 협력적으로 실행되는 프로세스들은 아무렇게나 마구 동시에 실행해서는 안 된다. 올바른 실행을 위해서는 `동기화`가 필수이다.

프로세스 동기화란 무엇일까? 국어 사전에 따르면 '정보, 통신 분야에서의 동기화란 작업들 사이의 수행 시기를 맞추는 것'을 의마한다고 나와 있다. 다시 말해 `프로세스 동기화`란 프로세스들 사이의 수행 시기를 맞추는 것을 의미한다. 프로세스들 사이의 수행 시기를 맞추는 것은 무엇을 의미할까? 크게 아래 두 가지를 일컫는다.

- 실행 순서 제어 : 프로세스를 올바른 순서대로 실행하기
- 상호 배제 : 동시에 접근해서는 안 되는 자원에 하나의 프로세스만 접근하게 하기

즉, 동기화에는 1. 실행 순서 제어를 위한 동기화가 있고, 2. 상호 배제를 위한 동기화가 있다.

#### 첫째, 실행 순서 제어를 위한 동기화
가령 Writer 라는 프로세스와 Reader 라는 프로세스가 동시에 실행 중이라고 가정하자. Writer 프로세스는 Book.txt 파일에 값을 저장하는 프로세스이고, Reader 프로세스는 Book.txt 파일에 저장된 값을 읽어 들이는 프로세스라고 가정한다.

이 두 프로세스는 무작정 아무 순서대로 실행되어서는 안 된다. Reader 프로세스는 Writer 프로세스 실행이 끝나야 비로소 실행할 수 있기 때문이다. Writer 프로세스가 Book.txt 에 값을 저장하기도 전에 Reader 프로세스가 Book.txt 를 읽는 것은 올바른 실행 순서가 아니다. 다시 말해 Reader 프로세스는 'Book.txt 안에 값이 존재한다'는 특정 조건이 만족되어야만 실행을 이어나갈 수 있다. 이렇게 동시에 실행되는 프롯세스를 올바른 순서대로 실행하는 것이 첫 번째 프로세스 동기화이다.

#### 둘째, 상호 배제를 위한 동기화
`상호 배제 (mutual exclusion)`는 공유가 불가능한 자원의 동시 사용을 피하기 위해 사용하는 알고리즘이다. 이 또한 간단한 예시를 들어보자. 가령 계좌에 10만 원이 저축되어 있다고 가정해 보자. 그리고 프로세스 A는 현재 저축된 금액에 2만 원을 넣는 프로세스, 프로세스 B는 현재 저축된 금액에 5만 원을 넣는 프로세스라고 가정하자.

프로세스 A가 실행되는 과정을 조금 더 자세히 표현해 보면 아래와 같이 나타낼 수 있다.
1. 계좌의 잔액을 읽어 들인다.
2. 읽어 들인 잔액에 2만 원을 더한다.
3. 더한 값을 저장한다.

마찬가지로 프로세스 B가 실행되는 과정은 아래와 같은 순서로 나타낼 수 있다.
1. 계좌의 잔액을 읽어 들인다.
2. 읽어 들인 잔액에 5만 원을 더한다.
3. 더한 값을 저장한다.

이제 프로세스 A와 B가 동시에 실행되었다고 가정해보자. 당연히 실행 결과 17만원이 계좌에 남을 것을 기대할 것이다. 하지만 동기화가 제대로 이루어지지 않은 경우 전혀 엉뚱한 결과가 나올 수 있다.

![상호 배제를 위한 동기화.001.jpeg](<images/상호 배제를 위한 동기화.001.jpeg>)

왜 이런 일이 발생했을까? A와 B는 '잔액'이라는 데이터를 동시에 사용하는데, A가 끝나기도 전에 B가 잔액을 읽어 버렸기 때문에 엉뚱한 결과가 나온 것이다. A와 B를 올바르게 실행하기 위해서는 한 프로세스가 잔액에 접근했을 때 다른 프로세스는 기다려야 한다. 아래와 같이 말이다.

![상호 배제를 위한 동기화.002.jpeg](<images/상호 배제를 위한 동기화.002.jpeg>)

이렇게 동시에 접근해서는 안 되는 자원에 동시에 접근하지 못하게 하는 것이 상호 `상호 배제를 위한 동기화`이다.

