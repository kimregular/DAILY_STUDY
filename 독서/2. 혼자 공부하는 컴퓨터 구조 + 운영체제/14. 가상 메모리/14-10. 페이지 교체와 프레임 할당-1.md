가상 메모리를 통해 작은 물리 메모리보다 큰 프로세스도 실행할 수 있다고는 하지만, 그럼에도 불구하고 여전히 물리 메모리의 크기는 한정되어 있다. 운영체제는 프로세스들이 한정된 메모리를 효율적으로 이용할 수 있도록 기존에 메모리에 적재된 불필요한 페이지를 선별하여 보조기억장치로 내보낼 수 있어야 하고, 프로세스들에 적절한 수의 프레임을 할당하여 페이지를 할당할 수 있게 해야한다. 이번에는 요구 페이징의 개념과 페이지 교체 알고리즘, 그리고 프레임 할당에 대해 알아보며 운영체제가 이러한 기능을 어떻게 수행하는지 알아보자.

### 요구 페이징
프로세스를 메모리에 적재할 때 처음부터 모든 페이지를 적재하지 않고 필요한 페이지만을 메모리에 적재하는 기법을 `요구 페이징 (demand paging)`이라고 한다. 이름 그대로 실행에 요구되는 페이지만 적재하는 기법이다.

요구 페이징의 기본적인 양상은 다음과 같다.

1. CPU가 특정 페이지에 접근하는 명령어를 실행한다.
2. 해당 페이지가 현재 메모리에 있을 경우 (유효 비트가 1일 경우) CPU는 페이지가 적재된 프레임에 접근한다.
3. 해당 페이지가 현재 메모리에 없을 경우 (유효 비트가 0일 경우) 페이지 폴트가 발생한다.
4. 페이지 폴트 처리 루틴은 해당 페이지를 메모리로 적재하고 유효 비트를 1로 설정한다.
5. 다시 1.번을 수행한다.

참고로 아무런 페이지도 메모리에 적재하지 않은 채 무작정 실행부터 할 수도 있다. 이 경우 프로세스의 첫 명령어를 실행하는 순간부터 페이지 폴트가 계속 발생하게 되고, 실행에 필요한 페이지가 어느 정도 적재된 이후부터는 페이지 폴트 발생 빈도가 떨어진다.

이를 `순수 요구 페이징 (pure demand paging)` 기법이라고 한다.

다시 요구 페이징 이야기로 돌아와서, 위와 같은 요구 페이징 시스템이 안정적으로 작동하려면 필연적으로 다음 두 가지를 해결해야 한다. 하나는 `페이지 교체`이고, 다른 하나는 `프레임 할당`이다. 프레임 할당은 조금 뒤에 알아보고 우선 페이지 교체에 대해 알아보자.

요구 페이징 기법으로 페이지들을 적재하다 보면 언젠가 메모리가 가득 차게 된다. 이때는 당장 실행에 필요한 페이지를 적재하기 위해 메모리에 적재된 페이지를 보조기억장치로 내보내야 한다. 메모리에 적재된 많고 많은 페이지 중 어떤 페이지를 내보내는 것이 최선일까? 이를 결정하는 방법이 페이지 교체 알고리즘이다. 즉 쫓아낼 페이지를 결정하는 방법을 `페이지 교체 알고리즘`이라 한다.

