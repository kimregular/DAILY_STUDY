### RAID의 종류
여러 개의 하드 디스크나 SSD를 마치 하나의 장치처럼 사용하는 RAID를 구성하는 방법은 여러 가지가 있다. RAID 구성 방법을 `RAID 레벨`이라고 표현한다. RAID 레벨에는 대표적으로 RAID0, RAID1, RAID2, RAID3, RAID4, RAID5, RAID6이 있고, 그로부터 파생된 RAID10, RAID50 등이 있다. 이들 중 가장 대중적인 RAID0, RAID1, RAID4, RAID5, RAID6에 대해 알아보자. (RAID2와 RAID3은 현재 잘 활용되지 않는다.)

#### RAID 0
우선 RAID 0이다. `RAID 0`은 여러 개의 보조기억장치에 데이터를 단순히 나누어 저장하는 구성 방식이다. 가령 1TB 하드 디스크 네 개로 RAID 0을 구성했다고 가정한다.
이제 어떠한 데이터를 저장할 때 각 하드 디스크는 아래와 같이 번갈아 가며 데이터를 저장한다. 즉, 저장되는 데이터가 하드 디스크 개수만큼 나뉘어 저장된다.

![[RAID.001.jpeg]]

이때 마치 줄무늬처럼 분산되어 저장된 데이터를 `스트라입(stripe)`이라 하고, 분산하여 저장하는 것을 `스트라이핑 (striping)`이라고 한다. 참고로 stripe는 영어로 줄무늬라는 뜻이다.

위와 같이 데이터가 분산되어 저장되면, 다시 말해 스트라이핑되면 저장된 데이터를 읽고 쓰는 속도가 빨라진다. 하나의 대용량 저장 장치를 이용했더라면 여러 번에 걸쳐 읽고 썼을 데이터를 동시에 읽고 쓸 수 있기 때문이다. 그렇기에 4TB 저장 장치 한 개를 쓰는 속도보다 RAID 0으로 구성된 1TB 저장 장치 네 개의 속도가 이론상 네 배가량 빠르다.

![[RAID.002.jpeg]]

그런데 RAID 0에는 단점이 있다. 저장된 정보가 안전하지 않다. RAID 0으로 구성된 하드 디스크 중 하나에 문제가 생긴다면 다른 모든 하드 디스크의 정보를 읽는 데 문제가 생길 수 있다. 그래서 등장한 것이 RAID 1이다.

![[RAID.003.jpeg]]

#### RAID 1
RAID 1 은 복사본을 만드는 방식이다. 마치 거울처럼 완전한 복사본을 만드는 구성이기에 `미러링 (mirroring)`이라고도 부른다. 아래 그림은 네 개의 하드 디스크를 RAID 1로 구성한 모습이다. RAID 0 처럼 데이터 스트라이핑이 사용되긴 했지만, 오른쪽 두 하드 디스크는 마치 거울처럼 왼쪽의 두 하드 디스크와 동일한 내용을 저장한다. 이처럼 RAID 1에 어떠한 데이터를 쓸 때는 원본과 복사본 두 군데에 쓴다. 그렇기에 쓰기 속도는 RAID 0보다 느리다.

![[RAID.004.jpeg]]

RAID 1 방식은 복구가 매우 간단하다는 장점이 있다. 똑같은 디스크가 두 개 있는 셈이니, 하나에 문제가 발생해도 잃어버린 정보를 금방 되찾을 수 있기 때문이다. 

하지만 RAID 1은 하드 디스크 개수가 한정되었을 때 사용 가능한 용량이 적어지는 단점이 있다. 위 그림만 보아도 RAID 0 구성은 4TB의 정보를 저장할 수 있는 반면, RAID 1에서는 2TB의 정보만 저장할 수 있다. 즉, RAID 1에서는 복사본이 만들어지는 용량만큼 사용자가 사용하지 못한다. 결국 많은 양의 하드 디스크가 필요하게 되고, 비용이 증가한다는 단점으로도 이어진다.

#### RAID 4
`RAID 4`는 RAID 1 처럼 완전한 복사본을 만드는 대신 오류를 검출하고 복구하기 위한 정보를 저장한 장치를 두는 구성 방식이다. 이때 '오류를 검출하고 복구하기 위한 정보'를 `패리티 비트 (parity bit)`라고 한다. RAID 4에서는 패리티를 저장한 장치를 이용해 다른 장치들의 오류를 검출하고, 오류가 있다면 복구한다. 이로써 RAID 4는 RAID 1보다 적은 하드 디스크로도 데이터를 안전하게 보관할 수 있다.

![[RAID.005.jpeg]]

**오류를 검출하는 패리티 비트**
원래 패리티 비트는 오류 검출만 가능할 뿐 오류 복구는 불가능하다. 하지만 RAID 에서는 패리티 값으로 오류 수정도 가능하다. 다만 구체적인 방법인 패리티 방법은 알아보지 않는다. 중요한 두 가지만 기억하자.
1. RAID 4에서는 패리티 정보를 저장한 장치로써 나머지 장치들의 오류를 검출, 복구한다.
2. 패리티 비트는 본래 오류 검출용 정보지만, RAID에서는 오류 복구도 가능하다.

#### RAID 5
RAID 4에서는 어떤 새로운 데이터가 저장될 때마다 패리티를 저장하는 디스크에도 데이터를 쓰게 되므로 패리티를 저장하는 장치에 병목 현상이 발생한다는 문제점이 있다.

![[RAID.006.jpeg]]

`RAID 5`에서는 아래 그림처럼 패리티 정보를 분산하여 저장하는 방식으로 RAID 4의 문제인 병목 현상을 해소한다.

![[RAID.007.jpeg]]

RAID 4는 패리티를 저장한 장치를 따로 두는 방식이고, RAID 5는 패리티를 분산하여 저장하는 방식이다.

#### RAID 6
`RAID 6`의 구성은 기본적으로 RAID 5와 같으나, 다음 그림과 같이 서로 다른 두 개의 패리티를 두는 방식이다. 이는 오류를 검출하고 복구할 수 있는 수단이 두 개가 생긴 셈이다. 따라서 RAID 6은 RAID 4나 RAID 5보다 안전한 구성이라 볼 수 있다. 다만 새로운 정보를 저장할 때마다 함께 저장할 패리티가 두 개이므로, 쓰기 속도는 RAID 5보다 느리다. 따라서 RAID 6은 데이터 저장 속도를 조금 희생하더라도 데이터를 더욱 안전하게 보관하고 싶을 때 사용하는 방식이다.

![[RAID.008.jpeg]]

여기까지 다양한 RAID의 개념과 RAID 레벨을 알아봤다. 이 외에도 RAID 0과 RAID 1을 혼합한 RAID 10 방식도 있고 RAID 0과 RAID 5를 혼합한 RAID50 방식도 있다. (여러 RAID 레벨을 혼합한 방식을 `Nested RAID`라고 한다.)

각 RAID 레벨마다 장단점이 있으므로 어떤 상황에서 무엇을 최우선으로 원하는지에 따라 최적의 RAID 레벨은 달라질 수 있다. 그렇기에 각 RAID 레벨의 대략적인 구성과 특징을 아는 것이 중요하다.