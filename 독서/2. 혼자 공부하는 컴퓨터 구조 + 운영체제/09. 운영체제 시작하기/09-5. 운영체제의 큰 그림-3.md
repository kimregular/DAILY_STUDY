### 운영체제의 핵심 서비스
알아볼 핵심 서비스는 프로세스 관리, 자원 접근 및 할당, 파일 시스템 관리이다.

#### 프로세스 관리
실행 중인 프로그램을 `프로세스 (process)`라고 한다. 윈도우의 작업 관리자를 열어 프로세스 항목을 보면 굉장히 많은 프로세스가 실행 중인 것을 알 수 있다. 이처럼 우리가 컴퓨터를 사용하는 동안 메모리 안에서는 새로운 프로세스들이 마구 생성되고, 사용되지 않는 프로세스는 메모리에서 삭제된다.

일반적으로 하나의 CPU는 한 번에 하나의 프로세스만 실행할 수 있기에 CPU는 이 프로세스들을 조금씩 번갈아 가며 실행한다. 다시 말해 CPU는 한 프로세스를 실행하다가 다른 프로세스로 실행을 전환하고, 그 프로세스를 실행하다가 또 다른 프로세스로 실행을 전환하는 것을 반복한다.

이때 각 프로세스는 상태도, 사용하고자 하는 자원도 다양하다. 입출력장치를 주로 사용하는 프로세스도 있고, 입출력장치는 거의 사용하지 않고 주로 CPU만 사용하는 프로세스도 있다. 또 당장 실행할 수 있는 프로세스가 있는 반면, 당장 실행이 불가능한 프로세스도 있다.

그래서 운영체제는 다양한 프로세스를 일목요연하게 관리하고 실행할 수 있어야 한다. 운영체제가 다양한 프로세스를 어떻게 관리하고 실행하는지는 이후 알아본다.

추가로, 여러 프로세스가 동시에 실행되는 환경에서는 '프로세스 동기화'가 필수적이고, 프로세스가 꼼짝도 못하고 더 이상 실행되지 못하는 상황인 '교착 상태'를 해결해야 한다. 이것들도 이후 알아본다.

#### 자원 접근 및 할당
모든 프로세스는 실행을 위해 자원을 필요로 한다. 그리고 운영체제는 프로세스들이 사용할 자원에 접근하고 조작함으로써 프로세스에 필요한 자원을 할당해 준다. 이전에 컴퓨터의 네 가지 핵심 부품을 알아보았다. 운영체제가 CPU, 메모리, (보조기억장치와) 입출력장치를 어떻게 관리하고, 결과적으로 어떤 기능을 제공하는지 알아보자.

**CPU**\
일반적으로 메모리에는 여러 프로세스가 적재되고, 하나의 CPU는 한 번에 하나의 프로세스만 실행할 수 있다. 그래서 하나의 프로세스가 CPU를 이용하고 있다면 다른 프로세스는 기다려야 한다. 이에 운영체제는 프로세스들에 공정하게 CPU를 할당하기 위해 어떤 프로세스부터 CPU를 이용하게 할 것인지, 얼마나 오래 CPU를 이용하게 할지를 결정할 수 있어야 한다. 이를 `CPU 스케줄링`이라고 한다. 이도 이후 알아본다.

**메모리**\
메모리에 적재된 프로세스들은 크기도, 적재되는 주소도 자기각색이다. 같은 프로세스라 할지라도 실행할 때마다 적재되는 주소가 달라질 수 있다. 그래서 운영체제는 새로운 프로세스가 적재될 때마다 어느 주소에 적재해야 할지를 결정해야 한다.

때로는 메모리가 이미 꽉 차 있어 꼭 실행해야 할 프로세스를 적재할 공간이 없는 경우도 있고, 메모리에 공간이 남았는 데도 불구하고 프로세스를 적재하지 못하는 상황도 발생한다.

운영체제가 프로세스에게 어떻게 메모리를 할당하는지, 그리고 메모리가 부족할 경우 이를 어떻게 극복하는지 이후 알아본다.

**입출력장치**\
인터럽트 서비스 루틴은 운영체제가 제공하는 기능으로 커널 영역에 있다. 입출력장치가 발생시키는 하드웨어 인터럽트도 마찬가지이다. 입출력장치가 CPU에 하드웨어 인터럽트 요청 신호를 보내면 CPU는 하던 일을 잠시 백업한 뒤 커널 영역에 있는 인터럽트 서비스 루틴을 실행한다. 이처럼 운영체제는 인터럽트를 처리하는 프로그램, 즉 인터럽트 서비스 루틴을 제공함으로서 입출력작업을 수행한다.

#### 파일 시스템 관리
컴퓨터를 사용할 때는 여러 파일을 열고, 생성하고, 삭제하곤 한다. 그리고 이 파일들을 한데 묶어 디렉터리로 관리한다. 자칫 당연해 보이는 이런 `파일 시스템(File System)`도 운영체제가 지원하는 핵심 서비스이다. 운영체제가 보조기억장치 속 데이터를 어떻게 파일과 디렉터리로 관리하는지 이후 알아본다.

정리하자면 이렇다. 

운영체제의 핵심 서비스를 제공하는 부분을 커널이라고 한다. 그리고 사용자 프로세스가 커널의 서비스를 제공받기 위해서는 (커널 영역의 코드를 실행하기 위해서는) 사용자 모드에서 커널 모드로 전환해야 하고, 이는 시스템 호출을 통해 이뤄진다. 즉, 시스템 호출은 커널 모드로서 운영체제의 서비스를 제공 받을 수 있는 방법이다. 그리고 대표적인 커널의 서비스로는 프로세스 관리, 자원 접근 및 할당, 파일 시스템 관리가 있다.