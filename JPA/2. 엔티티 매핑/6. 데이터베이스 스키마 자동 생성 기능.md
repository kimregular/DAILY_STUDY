JPA는 데이터베이스 스키마를 자동으로 생성하는 기능을 지원한다. 클래스의 매핑정보를 보면 어떤 테이블에 어떤 컬럼을 사용하는지 알 수 있다. JPA는 이 매핑 정보와 데이터베이스 방언을 사용해서 데이터베이스 스키마를 생성한다. 

xml 이나 properties 파일에 다음 속성을 추가한다.

```
hibernate.hbm2ddl.auto
```

이 속성을 추가하면 애플리케이션 실행 시점에 데이터베이스 테이블을 자동으로 생성한다. 

스키마 자동 생성 기능을 사용하면 애플리케이션 실행 시점에 데이터베이스 테이블이 자동으로 생성되므로 개발자가 테이블을 직접 생성하는 수고를 덜 수 있다. 하지만 스키마 자동 생성 기능이 만든 DDL은 운영 환경에서 사용할 만큼 완벽하지는 않으므로 개발 환경에서 사용하거나 매핑을 어떻게 해야 하는지 참고하는 정도로만 사용하는 것이 좋다.

객체와 테이블을 매핑하는 데 아직 익숙하지 않다면 '데이터베이스 스키마 자동 생성'을 적극 활용하자. 이 기능을 사용해서 생성된 DDL을 보면 엔티티와 테이블이 어떻게 매핑되는지 쉽게 이해할 수 있다. 스키마 자동 생성하기는 엔티티와 테이블을 어떻게 매핑해야 하는지 알려주는 가장 훌륭한 학습 도구이다.

`hibernate.hbm2ddl.auto` 에 가능한 속성은 아래 표와 같다.


|옵션     | 설명     |
| --- | --- |
|create     |기존 테이블을 삭제하고 새로 생성한다. DROP + CREATE     |
|create-drop     |create 속성에 추가로 애플리케이션을 종료할 때 생성한 DDL을 제거한다. DROP + CREATE + DROP     |
|update     |데이터베이스 테이블과 엔티티 매핑정보를 비교해서 변경 사항만 수정한다.     |
|validate     |데이터베이스 테이블과 엔티티 매핑정보를 비교해서 차이가 있으면 경고를 남기고 애플리케이션을 실행하지 않는다. 이 설정은 DDL을 수정하지 않는다.     |
|none     |자동 생성 기능을 사용하지 않으려면 해당 속성 자체를 삭제하거나 유효하지 않은 옵션 값을 주면 된다.     |


## 주의사항
운영 서버에서 create, create-drop, update 처럼 ddl을 수정하는 옵션은 절대 사용하면 안 된다. 오직 개발 서버나 개발 단계에서만 사용해야 한다. 이 옵션들은 운영 중인 데이터베이스의 테이블이나 컬럼을 삭제할 수 있다.

개발 환경에 따른 추천 전략은 다음과 같다.
- 개발 초기 단계는 create 또는 update
- 초기화 상태로 자동화된 테스트를 진행하는 개발자 환경과 CI 서버는 create 또는 create-drop
- 테스트 서버는 update 또는 validate
- 스테이징과 운영 서버는 validate 또는 none