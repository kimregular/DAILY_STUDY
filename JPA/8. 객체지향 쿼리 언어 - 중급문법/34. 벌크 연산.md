엔티티를 수정하려면 영속성 컨텍스트의 변경 감지 기능이나 병합을 사용하고, 삭제하려면 `EntityManager.remove()` 메소드를 사용한다. 하지만 이 방법으로 수백 개 이상의 엔티티를 하나씩 처리하기에는 시간이 너무 오래 걸린다. 이럴 때 여러 건을 한 번에 수정하거나 삭제하는 벌크 연산을 사용하면 된다.

예를 들어 재고가 10개 미만인 모든 상품의 가격을 10% 상승시키려면 아래와 같이 벌크 연산을 사용하면 된다.

```java
String sqlString = "update Product p set p.price = p.price * 1.1 where p.stockQuantity < :stockAmount";

int resultCount = em.createQuery(sqlString)
					.setParameter("stockAmount", 10)
					.executeUpdate();
```

벌크 연산은 `executeUpdate()` 메소드를 사용한다. 이 메소드는 벌크 연산으로 영향을 받은 엔티티 건수를 반환한다.

삭제도 같은 메소드를 사용한다. 아래는 가격이 100원 미만인 상품을 삭제하는 코드다.

```java
String sqlString = "delete from Product p where p.price < :price";

int resultCount = em.createQuery(sqlString)
					.setParameter("price", 100)
					.executeUpdate();
```

## 주의점
벌크 연산을 사용할 때는 벌크 연산이 영속성 컨텍스트를 무시하고 데이터베이스에 직접 쿼리한다는 점에 주의해야 한다.