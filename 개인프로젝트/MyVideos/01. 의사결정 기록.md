# 의사결정 기록

### Util 클래스들에 @Component 사용
차후 테스트코드 작성시 mock 활용을 위해 사용했음(현재 테스트 커버리지가 매우 낮다는 불상사는 차치함)

### 서비스단에는 private 클래스가 없어야한다!
서비스가 서비스에 의존하게 되면 로직 흐름 파악하기가 너무 어려움 
서비스단에서 사용하는 프라이빗 메서드가 많아지면 따로 분리하는 방안이 이상적임
따라서 유틸 클래스를 만들어서 서비스단에 필요한 기타 등등 기능들은 모두 유틸 안에 정의하고 사용하도록 함 

이렇게 하면 좋은점이 해당 기능 테스트를 진행할 수 있음 (프라이빗 메서드는 테스트를 작성하지 않는다) 물론 mock 사용도 가능함

유틸 클래스가 유틸 클래스 자신에 의존하는 경우에 대해서는 추후 개선 예정

### 프론트에서 쿠키에 접근하지 못하도록 HTTPONLY 설정 진행
기존에는 서버에서 헤더에 jwt 정보를 담아 응답했다.  
프론트에서는 이 정보를 가지고 쿠키에 토큰을 저장한다.  
백엔드와 프론트간 jwt 유효 시간이 다른 문제가 발생했다.  
또한 클라이언트가 토큰에 접근할 수 있기 때문에 보안 취약점이 발생했다.  
  
따라서 보안을 위해 프론트에서 쿠키에 접근하지 못하도록 설정하기로 결정했다.  
  
서버에서는 httpOnly 설정된 쿠키를 응답에 담아준다.  
프론트에서는 해당 정보에 접근하지 못하고, 요청시에 포함할건지만 결정할 수 있다.  
프론트에서 로그인 후에 /me 경로로 로그인한 유저의 정보를 요청하도록 설정했다.
