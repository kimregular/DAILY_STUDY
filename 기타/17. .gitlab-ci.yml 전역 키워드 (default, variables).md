#infra

## 전역 키워드 (Global Keywords)
말 그대로 전역적으로 사용할 수 있는 키워드를 의미한다. 5개가 있다.

1. **`default`**
2. `include`
3. `stages`
4. **`variables`**
5. `workflow`

5개 중에 default, variables 만 알아보자.

## default
- 모든 job이 공통적으로 따라야 할 기본 설정을 정의한다.
- 개별 job에서 override 하면 그 job에는 default가 적용되지 않는다.

```yml
default:
	image: python:3.0

job name 1:
	script: my script texts
	
job name 2:
	image: python:2.0
	script: my script texts

```

default 로 파이썬의 버전을 3버전을 지정했다.\
`job name 1`에서는 별다른 image 설정이 없으므로 파이썬 3버전이 사용된다.\
`job name 2`에서는 image 설정을 따로 지정했으므로 default가 무시된다.

## variables 
- 모든 job에서 참조 가능한 전역 변수를 선언한다.
- 각 job 내부에서 같은 이름으로 변수를 재정의하면 로컬 변수가 우선한다.
- 선언된 변수는 스크립트에서 ${VAR_NAME} 형태로 사용할 수 있다.
- 민감한 값은 GitLab UI의 **CI/CD Settings → Variables**에서 관리하는 것이 권장된다.

```yaml
variables:
	VAR: my-global-var-value
	
job name 1:
	script:
		echo ${VAR}
	
job name 2:
	variables:
		VAR: local-var-value
	script:
		echo ${VAR}
```

전역 변수로 `VAR`를 선언했다.\
`job name 1`에서는 전역 변수의 `VAR`를 사용한다.\
`job name 2`에서는 로컬 변수를 선언했으므로 전역 변수의 값은 사용되지 않는다.