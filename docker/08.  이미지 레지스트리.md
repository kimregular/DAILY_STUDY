Github는 소스코드를 저장하는 저장소이다. 개발자는 Github를 사용해서 자신의 소스코드를 쉽게 보관하고 다른 개발자들과 공유할 수 있다. 이미지 레지스트리는 이미지를 저장하는 저장소이다. Image Registry도 Github와 비슷하다. 가장 많이 사용되는 Public Image Registry는 Docker Hub이다. Github가 소스코드를 저장하는 저장소이면, Docker Hub는 이미지를 공유하는 저장소이다. GitHub에는 소스코드만 보관하고 Docker Hub에는 이 소스코드를 사용해서 만들어진 애플리케이션과 그 애플리케이션을 실행할 수 있는 환경이 모두 포함되어 있는 이미지를 저장한다.

## 이미지 레지스트리가 제공하는 기능
여러 이미지 레지스트리가 있지만 공통적으로 제공하는 기능을 알아보자.

- **이미지 공유**
기본적으로 이미지를 다운로드하고 업로드하는 기능을 제공한다. 

- **이미지 검색**
이미지 레지스트리에 있는 이미지들을 검색하고 필요한 이미지를 찾아볼 수 있다.

- **버전 관리**
이미지 레지스트리는 이미지의 버전을 관리하기 때문에 사용자는 이미지를 다운로드할 때 특정 버전의 이미지를 지정해서 다운받을 수 있다.

- **보안**
원하는 사용자만 이미지를 다운받을 수 있도록 인증 처리와 권한 관리 기능을 제공한다. 그리고 안전한 이미지를 다운로드 받을 수 있도록 업로드된 이미지의 보안을 검증하는 기능도 있다.

- **파이프라인**
DevOps 파이프라인 기능과 연계해서 이미지를 업로드했을 때 자동으로 배포가 이루어지도록 연계 기능이나 알림 기능도 제공한다.

## 이미지가 저장되는 공간
이미지가 저장되는 공간은 크게 3가지로 분류할 수 있다. 도커가 설치되어 있는 호스트머신의 로컬 스토리지와 온라인 저장소로 구분할 수 있는데 온라인 저장소는 또 2가지로 나눌 수 있다. 주로 기업에서 많이 사용하는 프라이빗 레지스트리와 도커 허브 같은 퍼블릭 레지스트리가 있다.

컨테이너를 실행하려면 이미지의 이름을 입력해야한다. `docker run` 명령에서 이미지의 이름을 지정하면 먼저 로컬 스토리지에서 해당하는 이미지가 있는지 검색한다. 로컬 스토리지는 도커를 실행하는 호스트 os의 특정 폴더를 의미한다. 그래서 이 로컬 스토리지에 이미지가 있으면 바로 실행이 된다. 스토리지에 이미지가 없으면 호스트 외부의 온라인 레지스트리에서 이미지를 로컬 스토리지로 다운받는다. 그리고 다운받은 로컬 스토리지의 이미지를 사용해서 컨테이너를 실행한다. 그리고 다음부터는 해당 컨테이너를 실행할 때마다 로컬 스토리지에 이미 다운로드 받아놓은 이미지가 있기 때문에 온라인 레지스트리를 검색하지 않고 바로 컨테이너로 실행된다. 

온라인 레지스트리는 프라이빗 레지스트리와 퍼블릭 레지스트리로 나눌 수 있다. 특정 네트워크에만 접근이 가능하면 프라이빗 레지스트리이다. 모든 네트워크에 접근이 가능하면 퍼블릭 레지스트리이다. 도커 허브는 온라인에서 가입만 하면 모두가 사용할 수 있기 때문에 퍼블릭 레지스트리이다. 사내망처럼 내부망에서만 사용할 수 있는 레지스트리는 프라이빗 레지스트리라고 부른다. 

도커 허브 같은 경우는 모두가 접근할 수 있는 레지스트리이기 때문에 이런 공간에 이미지를 저장하면 보안상 문제가 발생할 수도 있다. 그래서 도커 허브같은 서비스를 이용하지 않고 개인만의 레지스트리를 사용하는 방법도 있다. 이 방법도 대표적으로 2가지 방법이 있다.

첫 번째는 직접 자신의 서버에 레지스트리를 설치해서 사용하는 방법이다. 서버에 설치하는 레지스트리 소프트웨어는 하버나 도커 프라이빗 레지스트리 같은 제품이 있다. 설치형 레지스트리는 사용자가 직접 레지스트리를 서버에 설치해야 한다.

두 번째는 퍼블릭 클라우드의 서비스를 사용하는 방법이다. 퍼블릭 클라우드의 서비스로는 AWS의 ECR, Azure의 Container Registry(ACR) 같은 서비스를 사용할 수 있다.  퍼블릭 클라우드의 레지스트리를 사용하면 시간당 사용 요금을 지불하고 레지스트리를 사용할 수 있다.



