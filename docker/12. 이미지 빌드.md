앞서 살펴봤듯이 현대의 인프라 구성에서 가장 중요한 개념 중 하나가 IaC 라는 방법론이다. IaC는 코드를 통해 인프라를 관리한다. 도커에서도 이 IaC 방법을 활용해서 코드로 이미지를 관리하는 방식이 이미지 빌드이다. 

자신이 서버 관리자라고 가정해보자. 나는 회사의 가상 머신을 관리해야 한다. 보통 가상 머신을 관리하는 대시보드에서 클릭을 하거나 명령어를 실행해서 작업을 수행한다. 그런데 만약 이 업무를 다른 사람에게 인수인계해야 하면 이런 작업 과정을 하나씩 캡쳐하거나 실행하는 명령어의 순서들을 가이드로 만들어야한다. 그리고 그 가이드를 새로운 사람이 다시 숙지해가면서 수행하다 보면 클릭하다가 실수를 할 수도 있고 전혀 다른 결과가 나오거나 장애가 발생할 위험도 있다. 이런 상황을 보통 휴먼 에러라고 부른다. 사람이 직접 인프라를 컨트롤하다 보면 실수가 나올 수 있다. 그리고 개인이 인프라를 관리하면 인프라의 상태를 변경한 기록들을 관리하기도 쉽지 않다. 

그래서 IaC 방법을 사용하면 코드로 인프라의 상태를 관리할 수 있다. 코드에 상세 작업 내용이 기제되어 있고 이 작업을 사람이 아닌 프로그램이 대신 수행해 주는 것이다. 프로그램이 작업을 하기 때문에 작업들을 더 빠르고 안전하게 실행할 수 있다. 코드에 들어가는 내용은 프로그램이 작업하기 위한 일련의 작업 명세서로 사용된다. 그리고 이런 명세서를 GitHub 같은 소스코드 레파지토리에 저장하면 인프라의 상태도 소스코드처럼 버전 관리를 할 수 있다. IaC를 활용하는 많은 프로그램이 있는데 도커도 그 중 하나다.

도커는 Docker File 이라는 소스코드를 사용해서 인프라의 상태를 저장하는 이미지를 만들 수 있다. 이를 도커의 커밋과 비교해보자. 커밋 방식은 이미지를 만들 때마다 컨테이너를 실행해야 되고 사용자가 명령어를 직업 입력해야 한다는 문제가 있다. 그리고 커밋 하나당 이미지의 레이어가 하나가 추가되기 때문에 여러 개의 레이어를 추가하고 싶을 때는 여러 번의 커밋을 수행